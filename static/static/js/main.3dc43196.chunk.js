(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{134:function(e,t,a){e.exports=a(359)},139:function(e,t,a){},266:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},354:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(21),o=a.n(r),i=(a(139),a(3)),c=a(4),l=a(7),p=a(5),u=a(6),m=a(367),d=a(366),h=a(9),T=a(24),f=a(128),E=a(129),v=a(26),b=function(e){return{type:"GET_ERRORS",payload:e}},g=function(){return{type:"CLEAR_ERRORS"}},y=a(39),L={},I=function(e){var t=[];return Object.keys(e).forEach(function(a){"string"===typeof e[a]?t.push(e[a]):e[a].map(function(e){t.push(e)})}),t.join(" ")};function O(e){var t=e.url,a=e.data,n=e.method,s=void 0===n?"GET":n,r=e.useAuth,o=void 0!==r&&r,i=e.headers,c=void 0===i?{}:i;return o&&(c.Authorization="Token ".concat(ze.getState().auth.user.token)),fetch(t,{headers:c,method:s,body:a}).then(function(e){if(e.ok){var a=e.headers.get("Content-Type")||"";return a.includes("application/json")?e.json().catch(function(e){return Promise.reject(new Error("Invalid JSON: "+e.message))}):a.includes("text/html")?e.text().then(function(e){return{page_type:"generic",html:e}}).catch(function(e){return Promise.reject(new Error("HTML error: "+e.message))}):void 0}return 404===e.status?Promise.reject(new Error("Page not found: "+t)):500===e.status?Promise.reject(new Error("Internal server error: "+t)):e.json().then(function(e){return Promise.reject(new Error(I(e)))})}).catch(function(e){return Promise.reject(new Error(e.message))})}var C=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},w="LOGOUT_USER_COMPLETE";var N=function(e,t){return function(e){localStorage.setItem("mytoptensJwtToken",e)}(e),{type:"SET_CURRENT_USER",payload:{token:e}}},k=function(e){return function(e){return e(g()),O({url:"/api/v1/rest-auth/logout/",method:"POST",useAuth:!1}).then(function(t){return localStorage.removeItem("mytoptensJwtToken"),e({type:w})}).then(function(){}).catch(function(t){return e(b({"logout user":"Unable to logout"}))})}},_=function(){return function(e){return O({url:"/api/v1/rest-auth/user/",method:"GET",useAuth:!0}).then(function(t){return e(function(e){return{type:"SET_USER_INFO",payload:e}}({username:t.username,email:t.email,id:t.id,emailVerified:t.email_verified}))}).catch(function(t){return e(b({"get user info":"Unable to get user info"}))})}},S=function(e){return{type:"FORGOT_PASSWORD_EMAIL_NOT_SENT"}},j=function(e){return function(t){t(g()),t({type:"FORGOT_PASSWORD_EMAIL_NOT_SENT"});var a=new FormData;for(var n in e)a.append(n,e[n]);return O({url:"/api/v1/rest-auth/password/reset/",data:a,method:"POST",useAuth:!1}).then(function(e){return t({type:"FORGOT_PASSWORD_EMAIL_SENT"})}).catch(function(e){return t(b({sendPasswordResetEmail:e.message}))})}},D=function(e){return{type:"PASSWORD_NOT_CHANGED"}},P=function(e){return{type:"CHANGE_PASSWORD_COMPLETE"}},A=function(e){return{type:"CONFIRM_EMAIL_NOT_SENT"}},M=function(){return function(e){return e(g()),e({type:"CONFIRM_EMAIL_NOT_SENT"}),O({url:"/api/v1/sendconfirmationemail/",method:"POST",useAuth:!0}).then(function(t){return"Email confirmation sent"===t.message?e({type:"CONFIRM_EMAIL_SENT"}):"Email already verified"===t.message?e({type:"CONFIRM_EMAIL_ALREADY_VERIFIED"}):void 0}).catch(function(t){console.log("sendConfirmationEmail error ",t);return e(b({sendConfirmationEmail:"Unable to send confirmation email. This probably means that there is no user registered with that email address."}))})}},R=a(39),x={isLoading:!1,isAuthenticated:!1,forgotPasswordEmailSent:!1,resetPasswordComplete:!1,changePasswordComplete:!1,confirmEmailSent:!1,user:{}},U="SEARCH_HOME_STARTED",F="SEARCH_HOME_SUCCEEDED",z="SEARCH_HOME_FAILED",V="SEARCH_HOME_CLEAR";function H(e){return function(t,a){if(!e||""===e)return t({type:V});t(function(e){return{type:U,payload:{searchTerm:e}}}(e));var n=!1;return a().auth.user.token&&(n=!0),O({url:"/api/v1/content/searchhome/?search=".concat(e),method:"GET",useAuth:n}).then(function(e){return t((a=e.results,{type:F,payload:{results:a}}));var a}).catch(function(e){return t({type:z}),t(b({"fetch topTenLists":e.message}))})}}var q=a(39),G={searchTerm:"",searchComplete:!1,searchResults:[]};var W=a(30),Y=a(10),J=a(27),K=[!1,!0],B=10,Z=a(38),X="CREATE_TOPTENITEM_SUCCEEDED",$="UPDATE_TOPTENITEM_SUCCEEDED",Q="MOVE_TOPTENITEM_UP_SUCCEEDED";var ee=function(e,t,a){return function(n){return O({url:"/api/v1/content/toptenitem/".concat(e,"/"),headers:{"Content-Type":"application/json"},data:JSON.stringify(Object(Y.a)({},t,a)),method:"PATCH",useAuth:!0}).then(function(e){return n(function(e){return{type:$,payload:e}}(e))}).catch(function(e){return n(b({"update topTenItem":e.message}))})}};var te=function(e){var t=e.topTenItemId;return function(e){return O({url:"/api/v1/content/toptenitem/".concat(t,"/moveup/"),headers:{"Content-Type":"application/json"},method:"PATCH",useAuth:!0}).then(function(t){return e({type:"MOVE_TOPTENITEM_UP_SUCCEEDED",payload:{topTenItems:t}})}).catch(function(t){return e(b({"move topTenItem up error ":t.message}))})}},ae=function(e){var t=e.topTenItemId;return function(e){var a=ze.getState().topTenItem.things[t],n=a.topTenList_id,s=a.order,r=ze.getState().topTenList.things[n].topTenItem[s];e(te({topTenItemId:r}))}};var ne=a(39),se={isLoading:!1,error:null,count:null,next:null,previous:null,things:{},organizerData:{}},re=Object(J.a)([function(e){return e.topTenItem.organizerData},function(e){return e.topTenList.organizerData}],function(e,t){var a={};return Object.keys(t).map(function(n){for(var s=t[n],r=[],o=0;o<s.topTenItem.length;o++){var i=Object(W.a)({},e[s.topTenItem[o]]);""!==i.name&&r.push(i)}a[s.id]=r}),Object.keys(t).map(function(n){var s=t[n];if(s.parent_topTenItem){var r=e[s.parent_topTenItem];if(r)a[r.topTenList_id].find(function(e){return e.order===r.order}).childTopTenListId=s.id}}),a});var oe="RECEIVE_ENTITIES",ie="FETCH_TOPTENLISTS_STARTED",ce="FETCH_TOPTENLISTS_FAILED",le="FETCH_TOPTENLIST_DETAIL_STARTED",pe="FETCH_TOPTENLIST_DETAIL_FAILED",ue="CREATE_TOPTENLIST_STARTED",me="CREATE_TOPTENLIST_SUCCEEDED",de="DELETE_TOPTENLIST_SUCCEEDED",he="SET_TOPTENLIST_IS_PUBLIC_SUCCEEDED",Te="UPDATE_TOPTENLIST_SUCCEEDED",fe="RECEIVE_ORGANIZER_DATA",Ee="FETCH_ORGANIZER_DATA_STARTED",ve="FETCH_ORGANIZER_DATA_FAILED",be=new Z.b.Entity("topTenItem",{topTenList:["topTenListSchema"]}),ge=new Z.b.Entity("topTenList",{topTenItem:[be]});function ye(e){return{type:oe,payload:e}}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.listset,a=e.topLevelTopTenListsOnly,n=e.limit,s=e.offset;return function(e,r){e({type:ie});var o=!1;r().auth.user.token&&(o=!0);var i="/api/v1/content/toptenlist/?";return a&&(i+="&toplevel=1"),t&&(i+="&listset=".concat(t)),n&&(i+="&limit=".concat(n)),s&&(i+="&offset=".concat(s)),O({url:i,method:"GET",useAuth:o}).then(function(t){var a={count:t.count,next:t.next,previous:t.previous,entities:Object(Z.a)(t.results,[ge]).entities};return e(ye(a))}).catch(function(t){return e({type:ce}),e(b({"fetch topTenLists":t.message}))})}}function Ie(e){return function(t,a){t({type:le});var n=!1;return a().auth.user.token&&(n=!0),O({url:"/api/v1/content/toptenlistdetail/?id=".concat(e),method:"GET",useAuth:n}).then(function(e){var a=Object(Z.a)(e,[ge]);return t(ye(a))}).catch(function(e){return t({type:pe}),t(b({"fetch topTenLists":e.message}))})}}var Oe=function(e,t){return function(a){return a({type:ue}),O({url:"/api/v1/content/toptenlist/",data:JSON.stringify(e),method:"POST",useAuth:!0,headers:{"Content-Type":"application/json"}}).then(function(e){a({type:me,payload:{topTenList:e}}),t.push("/topTenList/".concat(e.id))}).catch(function(e){return a(b({"create topTenList":e.message}))})}};var Ce=function(e,t,a){return function(n){return O({url:"/api/v1/content/toptenlist/".concat(e,"/"),headers:{"Content-Type":"application/json"},data:JSON.stringify(Object(Y.a)({},t,a)),method:"PATCH",useAuth:!0}).then(function(e){return n(ke(e.created_by)),n(function(e){return{type:Te,payload:e}}(e))}).catch(function(e){return n(b({"update topTenItem":e.message}))})}};var we=function(e){return function(t,a){return O({url:"/api/v1/content/toptenlist/".concat(e,"/"),method:"DELETE",useAuth:!0}).then(function(a){return t(function(e){return{type:de,payload:{id:e}}}(e))}).catch(function(e){return t(b({"delete topTenList":e.message}))})}};var Ne=function(e){var t=e.id,a=e.is_public;return function(e){return O({url:"/api/v1/content/toptenlist/".concat(t,"/"),headers:{"Content-Type":"application/json"},data:JSON.stringify({is_public:a}),method:"PATCH",useAuth:!0}).then(function(t){return e(function(e){var t=e.id,a=e.is_public;return{type:he,payload:{id:t,is_public:a}}}(t))}).catch(function(t){return e(b({"set topTenList is public":t.message}))})}};function ke(e){return function(t,a){t({type:Ee});var n=!1;return a().auth.user.token&&(n=!0),O({url:"/api/v1/content/toptenlist/?expand=topTenItem&fields=id,name,topTenItem,is_public,order,parent_topTenItem&created_by=".concat(e),method:"GET",useAuth:n}).then(function(e){var a=Object(Z.a)(e,[ge]);return t({type:fe,payload:a})}).catch(function(e){return t({type:ve}),t(b({"fetch my topTenList names":e.message}))})}}var _e=a(39),Se={isLoading:!1,error:null,count:0,next:"",previous:"",things:{},organizerData:{}},je=function(e){return Object.keys(e.topTenList.things).map(function(t){return e.topTenList.things[t]})},De=Object(J.a)([je],function(e){return e.filter(function(e){return e.is_public})}),Pe=Object(J.a)([je],function(e){var t={};return K.forEach(function(a){t[a]=e.filter(function(e){return e.created_by===ze.getState().auth.user.id&&e.is_public===a})}),t}),Ae=function(e){return e.topTenList.organizerData},Me=Object(J.a)([Ae],function(e){var t=Object.keys(e).map(function(t){return e[t]});return t.sort(function(e,t){return e.name.localeCompare(t.name)}),t}),Re=Object(J.a)([je,function(e){return e.topTenItem.things}],function(e,t){return function(a){var n=[];return a&&a.topTenItem.map(function(a){var s=Object(W.a)({},t[a]),r=e.find(function(e){return e.parent_topTenItem===a});r&&(s.childTopTenList=Object(W.a)({},r)),n.push(s)}),n}}),xe=Object(J.a)([Ae,function(e){return e.topTenItem.organizerData}],function(e,t){return function(a){var n,s;return a&&a.parent_topTenItem&&t&&(n=t[a.parent_topTenItem])&&(s=e[n.topTenList_id]),{parentTopTenItem:n,parentTopTenList:s}}});var Ue=Object(T.combineReducers)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":var a={};return Object.keys(t.payload).forEach(function(e){"string"===typeof t.payload[e]?a[e]=[t.payload[e]]:a[e]=Object(v.a)(t.payload[e])}),y(a,{});case"CLEAR_ERRORS":return{};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return R({isAuthenticated:!C(t.payload.token),isLoading:!0,user:R.constant({token:t.payload.token})},e);case"SET_USER_INFO":return R({isLoading:!1,user:{username:t.payload.username,email:t.payload.email,id:t.payload.id,emailVerified:t.payload.emailVerified}},e);case w:return R({isAuthenticated:!1,user:R.constant({})},e);case"FORGOT_PASSWORD_EMAIL_NOT_SENT":return R({forgotPasswordEmailSent:!1,resetPasswordComplete:!1},e);case"FORGOT_PASSWORD_EMAIL_SENT":return R({forgotPasswordEmailSent:!0,resetPasswordComplete:!1},e);case"RESET_PASSWORD_COMPLETE":return R({forgotPasswordEmailSent:!1,resetPasswordComplete:!0},e);case"PASSWORD_NOT_CHANGED":return R({changePasswordComplete:!1,errors:{}},e);case"CHANGE_PASSWORD_COMPLETE":return R({changePasswordComplete:!0},e);case"CONFIRM_EMAIL_NOT_SENT":return R({confirmEmailSent:!1,confirmEmailAlreadyVerified:!1},e);case"CONFIRM_EMAIL_SENT":return R({confirmEmailSent:!0},e);case"CONFIRM_EMAIL_ALREADY_VERIFIED":return R({confirmEmailAlreadyVerified:!0},e);default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return q({searchTerm:t.payload.searchTerm,searchComplete:!1,searchResults:q.constant([])},e);case F:return q({searchComplete:!0,searchResults:q.constant(t.payload.results)},e);case z:return q({searchComplete:!0},e);case V:return q({searchTerm:q.constant(""),searchComplete:!1,searchResults:q.constant([])},e);default:return e}},topTenList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return _e(Se,{});case oe:var a=t.payload,n=a.count,s=a.previous,r=a.next,o=a.entities,i={};return o&&o.topTenList&&(i=o.topTenList),_e({count:n,previous:s,next:r,things:_e.constant(i),organizerData:_e.constant({}),isLoading:!1},e);case ie:return _e({isLoading:!0},e);case ce:return _e({isLoading:!1},e);case le:return _e({isLoading:!0},e);case pe:return _e({isLoading:!1},e);case ue:return _e(e,e);case me:var c=t.payload.topTenList;return _e({things:Object(Y.a)({},c.id,c)},e);case de:return _e({things:_e.omit([t.payload.id])},e);case he:var l=t.payload.id;return _e({things:Object(Y.a)({},l,{is_public:t.payload.is_public})},e);case X:var p=t.payload.topTenItem;return _e.updateIn("things.".concat(p.topTenList,".topTenItem"),function(e){return[].concat(e,p.id)},e);case Te:var u={name:t.payload.name,description:t.payload.description,is_public:t.payload.is_public,modified_by:t.payload.modified_by,modified_at:t.payload.modified_at,parent_topTenItem:t.payload.parent_topTenItem};return _e({things:Object(Y.a)({},t.payload.id,u)},e);case Q:var m=t.payload.topTenItems,d=m[0].topTenList_id;return _e.updateIn("things.".concat(d,".topTenItem"),function(t){var a=[].concat(e.things[d].topTenItem);return m.map(function(e){a[e.order-1]=e.id}),a},e);case fe:var h=t.payload.entities,T={};return h&&h.topTenList&&(T=h.topTenList),_e({organizerData:_e.constant(T),isLoading:!1},e);case Ee:case ve:return _e(e,e);default:return e}},topTenItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return ne(se,{});case oe:var a=t.payload.entities,n={};return a&&a.topTenItem&&(n=a.topTenItem),ne({things:ne.constant(n),organizerData:ne.constant({}),isLoading:!1},e);case le:return ne(e,e);case X:var s=t.payload.topTenItem;return ne({things:Object(Y.a)({},s.id,s)},e);case $:var r={name:t.payload.name,description:t.payload.description,modified_at:t.payload.modified_at,order:t.payload.order};return ne({things:Object(Y.a)({},t.payload.id,r)},e);case Q:var o=t.payload.topTenItems,i={};return o.map(function(e){i[e.id]=e}),ne({things:i},e);case fe:var c=t.payload.entities;return c&&c.topTenItem?ne({organizerData:ne.constant(c.topTenItem),isLoading:!1},e):e;default:return e}}}),Fe=Object(f.composeWithDevTools)({});var ze=Object(T.createStore)(Ue,Fe(Object(T.applyMiddleware)(E.a))),Ve=a(2),He=a(360),qe=a(369),Ge=a(368),We=(a(266),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleClick=function(e){a.node.contains(e.target)||a.closeDropdown()},a.state={showDropdown:!1},a.closeDropdown=a.closeDropdown.bind(Object(Ve.a)(a)),a.onFocus=a.onFocus.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"closeDropdown",value:function(){this.setState({showDropdown:!1})}},{key:"onFocus",value:function(){this.setState({showDropdown:!0})}},{key:"render",value:function(){var e,t=this;return this.props.searchComplete&&(e=0===this.props.searchResults.length?s.a.createElement("div",{className:"hint"},"no results found for ".concat(this.props.searchTerm)):s.a.createElement("div",{className:"results"},s.a.createElement("ul",null,this.props.searchResults.map(function(e){var a="",n="/topTenList/".concat(e.id);return"List"===e.type?a="List":"Item"===e.type&&(a="Item"),s.a.createElement("li",{className:"result",key:e.id},s.a.createElement(He.a,{to:n,onClick:t.closeDropdown},s.a.createElement("span",{className:"type"},a,": "),s.a.createElement("span",{className:"name"},e.name)))})))),s.a.createElement("div",{className:"search",ref:function(e){return t.node=e}},s.a.createElement(Ge.a,{className:"form-control",onChange:this.props.onChange,onFocus:this.onFocus,type:"text",placeholder:this.props.placeholder}),this.state.showDropdown&&e)}}]),t}(n.Component)),Ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onSearch=function(e){var t=e.target.value;clearTimeout(a.searchTimeout),a.searchTimeout=setTimeout(function(){a.props.dispatch(H(t))},500)},a.state={showDropdown:!1},a.onLogout=a.onLogout.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"showDropdown",value:function(e){e.preventDefault(),this.setState(function(e){return{showDropdown:!e.showDropdown}})}},{key:"onLogout",value:function(e){e.preventDefault(),this.props.dispatch(k(this.props.history))}},{key:"render",value:function(){var e=this,t=this.props.auth,a=t.isAuthenticated,n=t.user,r=s.a.createElement("ul",{className:"navbar-nav ml-auto"},n.username&&s.a.createElement("li",{className:"nav-item"},s.a.createElement(He.a,{to:"/account",className:"nav-link"},n.username)),s.a.createElement("li",{className:"nav-item"},s.a.createElement(He.a,{to:"/",className:"nav-link",onClick:this.onLogout},"Logout"))),o=s.a.createElement("ul",{className:"navbar-nav ml-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(He.a,{className:"nav-link",to:"/register"},"Register")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(He.a,{className:"nav-link",to:"/login"},"Login")));return s.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-light bg-light"},s.a.createElement(He.a,{className:"navbar-brand",to:"/"},"My Top Tens"),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",onClick:function(t){e.showDropdown(t)}},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse ".concat(this.state.showDropdown?"show":""),id:"navbarSupportedContent"},a?r:o,s.a.createElement(We,{onChange:this.onSearch,placeholder:"Search lists and items...",searchComplete:this.props.searchComplete,searchResults:this.props.searchResults,searchTerm:this.props.searchTerm})))}}]),t}(n.Component),Je=Object(h.b)(function(e){return{auth:e.auth,searchTerm:e.page.searchTerm,searchComplete:e.page.searchComplete,searchResults:e.page.searchResults}})(Object(qe.a)(Ye)),Ke=a(361),Be=a(362),Ze=a(363),Xe=a(364),$e=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).state={isValidated:!1},e.customMessages={},e.getCustomMessage=function(t){if(t.validity.customError)return t.validationMessage;if(t.validity.typeMismatch)return e.customMessages["".concat(t.type,"Mismatch")];for(var a in e.customMessages)if(t.validity[a])return e.customMessages[a]},e.validate=function(){var t=o.a.findDOMNode(Object(Ve.a)(e)),a=t.length;if(!1===t.checkValidity()){for(var n=0;n<a;n++){var s=t[n],r=s.parentNode.querySelector(".invalid-feedback");if(r&&"button"!==s.nodeName.toLowerCase())if(s.validity.valid)r.textContent="";else{var i=e.getCustomMessage(s)||s.validationMessage;r.textContent=i}}return!1}for(var c=0;c<a;c++){var l=t[c],p=l.parentNode.querySelector(".invalid-feedback");p&&"button"!==l.nodeName.toLowerCase()&&(p.textContent="")}return!0},e.handleSubmit=function(t){t.preventDefault(),e.validate()&&e.props.onSubmit(t),e.setState({isValidated:!0})},e.validate=e.validate.bind(Object(Ve.a)(e)),e.checkFieldMatch=e.checkFieldMatch.bind(Object(Ve.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.inputsmustmatch){var t=o.a.findDOMNode(this),a=this.props.inputsmustmatch.input1,n=this.props.inputsmustmatch.input2,s=t.querySelector("#".concat(a)),r=t.querySelector("#".concat(n));s instanceof HTMLElement&&r instanceof HTMLElement&&(s.oninput=function(t){return e.checkFieldMatch(a,n,t)},r.oninput=function(t){return e.checkFieldMatch(a,n,t)})}}},{key:"checkFieldMatch",value:function(e,t,a){var n=o.a.findDOMNode(this);if(n instanceof HTMLElement){var s=n.querySelector("#".concat(e)),r=n.querySelector("#".concat(t));s instanceof HTMLElement&&r instanceof HTMLElement&&(s.value===r.value?r.setCustomValidity(""):r.setCustomValidity(this.props.inputsmustmatch.message))}}},{key:"render",value:function(){var e=Object(W.a)({},this.props),t=[];return e.className&&(t=Object(v.a)(e.className),delete e.className),this.state.isValidated&&t.push("was-validated"),s.a.createElement("form",Object.assign({},e,{className:t,noValidate:!0,onSubmit:this.handleSubmit}),this.props.children)}}]),t}(n.Component),Qe=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).state={username:"",email:"",password:"",password_confirm:""},e.handleInputChange=e.handleInputChange.bind(Object(Ve.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(Ve.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(Y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,email:this.state.email,password1:this.state.password,password2:this.state.password_confirm};this.props.registerUser(t,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){return s.a.createElement(Ke.a,null,s.a.createElement("h2",null,"Create an account"),s.a.createElement($e,{onSubmit:this.handleSubmit,inputsmustmatch:{input1:"password",input2:"password_confirm",message:"Passwords must match"}},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"email"},"Email address"),s.a.createElement(Ge.a,{type:"email",name:"email",required:!0,id:"email",onChange:this.handleInputChange,value:this.state.email,placeholder:"Enter your email address"}),s.a.createElement("div",{className:"invalid-feedback"}),s.a.createElement("small",{className:"form-text text-muted"},s.a.createElement("p",null,"You will use your email address to login. It will not be seen by other users."))))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"username"},"Username"),s.a.createElement(Ge.a,{type:"text",name:"username",id:"username",required:!0,onChange:this.handleInputChange,value:this.state.username,placeholder:"Enter your username"}),s.a.createElement("div",{className:"invalid-feedback"}),s.a.createElement("small",{className:"form-text text-muted"},s.a.createElement("p",null,"Your username may be seen by other users, for example in comments."))))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"password"},"Password"),s.a.createElement(Ge.a,{type:"password",name:"password",required:!0,minLength:8,pattern:".*[^0-9].*",id:"password",value:this.state.password,placeholder:"Enter your password",onChange:this.handleInputChange}),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"password_confirm"},"Confirm your password"),s.a.createElement(Ge.a,{type:"password",name:"password_confirm",id:"password_confirm",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.password_confirm,placeholder:"Confirm your password",onChange:this.handleInputChange}),s.a.createElement("div",{className:"invalid-feedback"}),s.a.createElement("small",{className:"form-text text-muted"},s.a.createElement("ul",null,s.a.createElement("li",null,"Your password can't be too similar to your other personal information."),s.a.createElement("li",null,"Your password must contain at least 8 characters."),s.a.createElement("li",null,"Your password can't be a commonly used password."),s.a.createElement("li",null,"Your password can't be entirely numbers.")))))),s.a.createElement(Be.a,{md:"9",lg:"6"},s.a.createElement(Ze.a,null,s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Create account"))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},this.props.errors.registration&&s.a.createElement("div",{className:"invalid-feedback ",style:{display:"block"}},this.props.errors.registration)))))}}]),t}(n.Component),et=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){a(g());var n=new FormData;for(var s in e)n.append(s,e[s]);return O({url:"/api/v1/rest-auth/registration/",data:n,method:"POST"}).then(function(e){return t.push("/welcome"),e}).catch(function(e){return a(b({registration:e.message}))})}}})(Object(qe.a)(Qe)),tt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).state={errors:{}},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"render",value:function(){return s.a.createElement(Ke.a,null,s.a.createElement("h2",null,"Welcome to My Top Tens"),s.a.createElement("p",null,"Your account has been created."),s.a.createElement("p",null,"To create Top Ten lists, you will need to verify your email address. An email containing a verification link has been sent to the email address with which you registered. Please click the link to verify your email address."),s.a.createElement("p",null,"If you do not receive the email within a few minutes, please check your Junk or Spam folder."),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("p",null,"You can request a new registration email by ",s.a.createElement(He.a,{to:"/login"},"Logging in")," and going to your user account (click your username in the header bar)."))))}}]),t}(n.Component),at=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}})(tt),nt=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).state={email:"",password:""},e.handleSubmit=e.handleSubmit.bind(Object(Ve.a)(e)),e.handleInputChange=e.handleInputChange.bind(Object(Ve.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"handleInputChange",value:function(e){this.setState(Object(Y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email,password:this.state.password};this.props.loginUser(t,this.props.history)}},{key:"render",value:function(){return s.a.createElement(Ke.a,null,s.a.createElement("h2",null,"Login"),s.a.createElement($e,{onSubmit:this.handleSubmit},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"email"},"Email address"),s.a.createElement(Ge.a,{type:"email",name:"email",id:"email",required:!0,onChange:this.handleInputChange,value:this.state.email,placeholder:"Email address or username"}),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"password"},"Password"),s.a.createElement(Ge.a,{type:"password",name:"password",required:!0,id:"password",value:this.state.password,placeholder:"Password",onChange:this.handleInputChange}),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},this.props.errors.authentication&&s.a.createElement("div",{className:"invalid-feedback ",style:{display:"block"}},this.props.errors.authentication)))),s.a.createElement(He.a,{className:"nav-link",to:"/forgotpassword"},"Forgot password?"))}}]),t}(n.Component),st=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e,t){return function(a){a(g());var n=new FormData;for(var s in e)n.append(s,e[s]);return O({url:"/api/v1/rest-auth/login/",data:n,method:"POST",useAuth:!1}).then(function(e){return a(N(e.key))}).then(function(){return t.push("/"),ze.dispatch(_())}).catch(function(e){return a(b({authentication:"Unable to log in with the provided credentials, please try again."}))})}}})(nt);function rt(e){var t=e.message,a=e.type,n=e.onClick;return s.a.createElement("div",{className:"flash-error ".concat(a)},s.a.createElement("span",null,t),s.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:n},s.a.createElement("span",{"aria-hidden":"true"},"\xd7")))}var ot=a(365);a(268);var it=function(){return s.a.createElement("div",{className:"loading"},s.a.createElement("div",{className:"inner-tube"},s.a.createElement(ot.a,{color:"secondary",style:{width:"3rem",height:"3rem"}})))},ct=function(e){var t=e.children,a=(e.is_public,e.headerText);return s.a.createElement(Ke.a,{className:"topTenLists-list"},a&&s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("h3",{className:"topTenLists-list-name"},a))),s.a.createElement(Be.a,null,t))},lt=(a(269),function(e){var t=e.topTenListId,a=e.isPublic?"public":"private",n=e.isPublic?"Public":"Private";return s.a.createElement("div",{className:"is-public"},s.a.createElement("button",{onClick:function(t){var a="public"===t.target.dataset.ispublic;e.onChangeIsPublic({id:t.target.dataset.toptenlistid,is_public:!a})},"data-toptenlistid":t,"data-ispublic":a,className:"".concat(a," btn btn-default"),title:n},"\xa0"))});function pt(e){for(var t=e.parentObject,a=e.property,n=e.value,s=Object.keys(t),r=0;r<s.length;r++){var o=t[s[r]];if(o[a]===n)return o}}function ut(e){var t=ze.getState(),a=t.topTenList.things,n=t.auth.user.id,s=!1;if(Object.keys(a).length>0){var r=pt({parentObject:a,property:"id",value:e});r&&(r.is_public||r.created_by===n)&&(s=!0)}return s}function mt(e){var t=ze.getState(),a=t.topTenList.things,n=t.auth.user.id,s=!1;if(Object.keys(a).length>0){var r=pt({parentObject:a,property:"id",value:e});r&&r.created_by===n&&(s=!0)}return s}function dt(){var e=ze.getState();return!(!e.auth.isAuthenticated||!e.auth.user.emailVerified)}a(270);var ht=function(e){var t=mt(e.topTenList.id);return s.a.createElement(Ze.a,{sm:"12",md:"6"},s.a.createElement("div",{className:"topTenList-summary"},s.a.createElement(He.a,{to:"/topTenList/".concat(e.topTenList.id)},s.a.createElement("div",{className:"topTenList-name"},s.a.createElement("div",null,e.topTenList.name))),t&&s.a.createElement("div",{className:"topTenList-summary-controls"},s.a.createElement(lt,{topTenListId:e.topTenList.id,isPublic:e.topTenList.is_public,onChangeIsPublic:e.onChangeIsPublic}),s.a.createElement("button",{className:"btn btn-danger",title:"Delete",onClick:function(t){e.onDeleteTopTenList({id:e.topTenList.id,name:e.topTenList.name})}},"X")),s.a.createElement(He.a,{to:"/topTenList/".concat(e.topTenList.id)},s.a.createElement("div",{className:"topTenList-description"},e.topTenList.description)),e.showCreatedBy&&s.a.createElement("div",{className:"topTenList-created-by"},e.topTenList.created_by_username)))},Tt=(a(271),a(272),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).state={pager:{}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){if(this.props.count){var e=this.props.currentPage?this.props.currentPage:this.props.defaultPage;this.setPage(e)}}},{key:"componentDidUpdate",value:function(e,t){this.props.count!==e.count&&this.setPage(this.props.defaultPage)}},{key:"setPage",value:function(e){var t=this.props,a=t.count,n=t.pageSize,s=this.state.pager;s=this.getPager(a,e,n),e<1||e>s.totalPages||(e=Math.min(e,s.totalPages),this.setState({pager:s}),this.props.onChangePage(e))}},{key:"getPager",value:function(e,t,a){t=t||1,a=a||10;var n,s,r=Math.ceil(e/a);r<=10?(n=1,s=r):t<=6?(n=1,s=10):t+4>=r?(n=r-9,s=r):(n=t-5,s=t+4);var o=(t-1)*a,i=Math.min(o+a-1,e-1),c=Object(v.a)(Array(s+1-n).keys()).map(function(e){return n+e});return{totalTopTenItems:e,currentPage:t,pageSize:a,totalPages:r,startPage:n,endPage:s,startIndex:o,endIndex:i,pages:c}}},{key:"render",value:function(){var e=this,t=this.state.pager;return!t.pages||t.pages.length<=1?null:s.a.createElement("ul",{className:"pagination"},s.a.createElement("li",{className:1===t.currentPage?"disabled":""},s.a.createElement("button",{type:"button",className:"btn pagination first",onClick:function(){return e.setPage(1)}},"First")),s.a.createElement("li",{className:1===t.currentPage?"disabled":""},s.a.createElement("button",{type:"button",className:"btn pagination previous",onClick:function(){return e.setPage(t.currentPage-1)}},"Previous")),s.a.createElement("li",{className:"spacer"}),t.pages.map(function(a,n){return s.a.createElement("li",{key:n,className:t.currentPage===a?"active":""},s.a.createElement("button",{type:"button",className:"btn pagination page",onClick:function(){return e.setPage(a)}},a))}),s.a.createElement("li",{className:"spacer"}),s.a.createElement("li",{className:t.currentPage===t.totalPages?"disabled":""},s.a.createElement("button",{type:"button",className:"btn pagination next",onClick:function(){return e.setPage(t.currentPage+1)}},"Next")),s.a.createElement("li",{className:t.currentPage===t.totalPages?"disabled":""},s.a.createElement("button",{type:"button",className:"btn pagination last",onClick:function(){return e.setPage(t.totalPages)}},"Last")))}}]),t}(s.a.Component));Tt.defaultProps={count:0,defaultPage:1,pageSize:10};var ft=Tt,Et=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).onAddTopTenList=function(){a.props.history.push("/newtopTenList")},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"renderPublicTopTenLists",value:function(){var e=this.props,t=e.publicTopTenLists,a=e.onChangeIsPublic,n=e.onDeleteTopTenList;return s.a.createElement(ct,{headerText:"All public Top Ten lists"},t.map(function(e){return s.a.createElement(ht,{key:e.id,topTenList:e,onChangeIsPublic:a,onDeleteTopTenList:n,showCreatedBy:!0})}))}},{key:"renderMyTopTenLists",value:function(){var e=this.props,t=e.myTopTenLists,a=e.onChangeIsPublic,n=e.onDeleteTopTenList;return Object.keys(t).map(function(e,r){var o=t[e],i="true"===e?"My public Top Ten lists":"My private Top Ten lists";return s.a.createElement("div",{key:r},o.length>0&&s.a.createElement(ct,{is_public:e,headerText:i},o.map(function(e){return s.a.createElement(ht,{key:e.id,topTenList:e,onChangeIsPublic:a,onDeleteTopTenList:n})})))})}},{key:"renderTabs",value:function(){return s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("span",{className:"mytoptens"===this.props.selectedTab?"selected":"",id:"mytoptens",onClick:this.props.handleTabClick},"My Top Ten lists"),s.a.createElement("span",{className:"publictoptens"===this.props.selectedTab?"selected":"",id:"publictoptens",onClick:this.props.handleTabClick},"Public Top Ten lists")))}},{key:"render",value:function(){var e,t;return"mytoptens"===this.props.selectedTab?e=this.renderMyTopTenLists():"publictoptens"===this.props.selectedTab&&(e=this.renderPublicTopTenLists()),this.props.isLoading?s.a.createElement("div",{className:"topTenLists-loading"},"Loading..."):(t=this.props.canCreateTopTenList()?s.a.createElement("button",{className:"btn btn-primary create-topTenList",onClick:this.onAddTopTenList},"+ New Top Ten list"):this.props.auth.isAuthenticated?s.a.createElement("div",null,"In order to create new Top Ten lists, please verify your email address by clicking the link in the email you were sent when you registered. You can request a new verification email from your ",s.a.createElement(He.a,{to:"/account"},"Account")," page."):s.a.createElement("div",null,"In order to create new Top Ten lists, please ",s.a.createElement(He.a,{to:"/login"},"log in")," or ",s.a.createElement(He.a,{to:"/register"},"register a My Top Tens account"),"."),s.a.createElement("div",{className:"topTenLists-list"},s.a.createElement(Ke.a,null,s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{className:"top-level-topTenLists-control"},s.a.createElement(Xe.a,{check:!0},s.a.createElement(Ge.a,{type:"checkbox",defaultChecked:this.props.topLevelTopTenListsOnly,onChange:this.props.handleTopLevelListsChange})," ","Show top level Top Ten lists"))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,t))),this.props.auth.isAuthenticated&&s.a.createElement("div",{className:"tabs"},this.renderTabs(),s.a.createElement("div",{className:"clearing"})),s.a.createElement("div",{className:"topTenLists"},e),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"text-center"},s.a.createElement(ft,{count:this.props.count,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onChangePage:this.props.onChangePage})))))}}]),t}(n.Component),vt=Object(qe.a)(Et),bt=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onSearch=function(e){clearTimeout(a.searchTimeout),a.searchTimeout=setTimeout(function(){a.props.dispatch(H(e))},500)},a.onChangeIsPublic=function(e){var t=e.id,n=e.is_public;a.props.dispatch(Ne({id:t,is_public:n}))},a.onDeleteTopTenList=function(e){var t=e.id,n=e.name;confirm("Are you sure you want to delete the topTenList ".concat(n))&&a.props.dispatch(we(t))},a.handleTabClick=function(e){var t=e.target.id;a.state.selectedTab!==t&&(a.setState({selectedTab:t}),a.setListSetURL(e.target.id),a.fetchTopTenLists({listset:t}))},a.onCloseFlashMessage=function(){a.props.dispatch(g())},e.dispatch(g());var n="publictoptens";e.auth.isAuthenticated&&(n=new URLSearchParams(e.location.search).get("listset")||"mytoptens");return a.setListSetURL(n),a.state={selectedTab:n,topLevelTopTenListsOnly:!0,currentPage:1},a.onChangePage=a.onChangePage.bind(Object(Ve.a)(a)),a.handleTopLevelTopTenListsChange=a.handleTopLevelTopTenListsChange.bind(Object(Ve.a)(a)),a.handleTabClick=a.handleTabClick.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchTopTenLists({})}},{key:"componentDidUpdate",value:function(e){e.auth.user.token!==this.props.auth.user.token&&this.fetchTopTenLists({}),e.auth.isAuthenticated&&!this.props.auth.isAuthenticated&&(this.setState({selectedTab:"publictoptens"}),this.setListSetURL("publictoptens"))}},{key:"fetchTopTenLists",value:function(e){var t=e.listset,a=void 0===t?this.state.topTenListset:t,n=e.topLevelTopTenListsOnly,s=void 0===n?this.state.topLevelTopTenListsOnly:n,r=e.currentPage,o=void 0===r?this.state.currentPage:r;this.props.dispatch(Le({listset:a,topLevelTopTenListsOnly:s,limit:10,offset:10*(o-1)}))}},{key:"onChangePage",value:function(e){this.setState({currentPage:e}),e!==this.state.currentPage&&this.fetchTopTenLists({currentPage:e})}},{key:"handleTopLevelTopTenListsChange",value:function(){var e=!this.state.topLevelTopTenListsOnly;this.setState({topLevelTopTenListsOnly:e}),this.fetchTopTenLists({topLevelTopTenListsOnly:e})}},{key:"setListSetURL",value:function(e){var t="".concat(this.props.location.pathname,"?listset=").concat(e);this.props.history.push(t)}},{key:"render",value:function(){return s.a.createElement("div",null,!C(this.props.errors)&&s.a.createElement(Ke.a,null,s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement(rt,{message:I(this.props.errors),type:"error",onClick:this.onCloseFlashMessage})))),this.props.isLoading&&s.a.createElement(it,null),s.a.createElement(vt,{auth:this.props.auth,myTopTenLists:this.props.myTopTenLists,publicTopTenLists:this.props.publicTopTenLists,canCreateTopTenList:dt,onCreateTopTenList:this.onCreateTopTenList,onChangeIsPublic:this.onChangeIsPublic,onDeleteTopTenList:this.onDeleteTopTenList,isLoading:this.props.isLoading,topLevelTopTenListsOnly:this.state.topLevelTopTenListsOnly,handleTopLevelTopTenListsChange:this.handleTopLevelTopTenListsChange,handleTabClick:this.handleTabClick,selectedTab:this.state.selectedTab,count:this.props.count,pageSize:10,currentPage:this.state.currentPage,onChangePage:this.onChangePage}))}}]),t}(n.Component),gt=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors,isLoading:e.topTenList.isLoading,publicTopTenLists:De(e),myTopTenLists:Pe(e),count:e.topTenList.count,next:e.topTenList.next,previous:e.topTenList.previous}})(Object(qe.a)(bt)),yt=(a(273),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onCreateTopTenList=function(e){a.props.dispatch(Oe(e,a.props.history))},a.onCloseFlashMessage=function(){a.props.dispatch(g())},a.state={name:"",description:""};for(var n=1;n<=B;n++)a.state["topTenItem".concat(n,"_name")]="",a.state["topTenItem".concat(n,"_description")]="";if(a.handleInputChange=a.handleInputChange.bind(Object(Ve.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ve.a)(a)),a.cancel=a.cancel.bind(Object(Ve.a)(a)),e.dispatch(g()),e.auth.isAuthenticated){var s=new URLSearchParams(e.location.search);a.state.parentTopTenItemId=s.get("parent-topTenItem-id"),a.state.parentTopTenItemName=s.get("parent-topTenItem-name"),a.state.parentTopTenListName=s.get("parent-topTenList-name"),a.state.parentTopTenListId=s.get("parent-topTenList-id")}return a.state.parentTopTenItemName&&(a.state.name=a.state.parentTopTenItemName),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(Y.a)({},e.target.name,e.target.value))}},{key:"cancel",value:function(e){this.props.history.push("/")}},{key:"handleSubmit",value:function(e){e.preventDefault();for(var t={name:this.state.name,description:this.state.description,topTenItem:[]},a=1;a<=B;a++)if(""!==this.state["topTenItem".concat(a)]){var n={name:this.state["topTenItem".concat(a,"_name")],description:this.state["topTenItem".concat(a,"_description")],order:a};t.topTenItem.push(n)}this.state.parentTopTenItemId&&(t.parent_topTenItem=this.state.parentTopTenItemId),this.onCreateTopTenList(t)}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){dt()||this.props.auth.isLoading||this.props.history.push("/")}},{key:"renderTopTenItemInputs",value:function(){for(var e=[],t=1;t<=B;t++)e.push(s.a.createElement("div",{className:"form-group",key:"topTenItem".concat(t)},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{lg:"9",className:"topTenItem-name"},s.a.createElement(Xe.a,{for:"topTenItem".concat(t,"_name")},"Top Ten item ",t),s.a.createElement(Ge.a,{type:"text",name:"topTenItem".concat(t,"_name"),id:"topTenItem".concat(t,"_name"),onChange:this.handleInputChange,value:this.state["topTenItem".concat(t,"_name")],placeholder:"Enter the Top Ten item name"}),s.a.createElement("div",{className:"invalid-feedback"}))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{lg:"9",className:"topTenItem-description"},s.a.createElement(Xe.a,{for:"topTenItem".concat(t,"_description")},"Top Ten item ",t," description"),s.a.createElement(Ge.a,{type:"textarea",name:"topTenItem".concat(t,"_description"),id:"topTenItem".concat(t,"_description"),onChange:this.handleInputChange,value:this.state["topTenItem".concat(t,"_description")],placeholder:"Enter the description"}),s.a.createElement("div",{className:"invalid-feedback"})))));return e}},{key:"render",value:function(){return s.a.createElement(Ke.a,{className:"create-topTenList"},!C(this.props.errors)&&s.a.createElement(Ke.a,null,s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement(rt,{message:I(this.props.errors),type:"error",onClick:this.onCloseFlashMessage})))),s.a.createElement("h2",null,"Create a new Top Ten list"),this.state.parentTopTenItemName&&s.a.createElement("div",{className:"parent-topTenItem"},s.a.createElement(He.a,{to:"/topTenList/".concat(this.state.parentTopTenListId)},this.state.parentTopTenListName)," > ",this.state.parentTopTenItemName),s.a.createElement($e,{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{lg:"9",className:"topTenList-name"},s.a.createElement(Xe.a,{for:"name"},"Top Ten List name"),s.a.createElement(Ge.a,{type:"text",name:"name",required:!0,id:"name",onChange:this.handleInputChange,value:this.state.name,placeholder:"Enter the topTenList name"}),s.a.createElement("div",{className:"invalid-feedback"}),s.a.createElement("small",{className:"form-text text-muted"},s.a.createElement("p",null,"Name is required"))))),s.a.createElement("div",{className:"form-group"},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{lg:"9",className:"topTenList-description"},s.a.createElement(Xe.a,{for:"username"},"Description"),s.a.createElement(Ge.a,{type:"textarea",name:"description",id:"description",onChange:this.handleInputChange,value:this.state.description,placeholder:"Enter the topTenList description"}),s.a.createElement("div",{className:"invalid-feedback"})))),this.renderTopTenItemInputs(),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{lg:"9"},s.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.cancel},"Cancel"),s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Save list"))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{lg:"9"},this.props.errors.topTenLists&&s.a.createElement("div",{className:"invalid-feedback ",style:{display:"block"}},this.props.errors.topTenLists)))))}}]),t}(n.Component)),Lt=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}})(Object(qe.a)(yt)),It=(a(274),a(133)),Ot=a.n(It),Ct=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this))).cancel=function(){var e={target:{dataset:{state:a.props["data-state"]},value:a.state.initialValue}};a.props.handleInputChange(e),a.toggleInput()},a.validate=function(){var e=o.a.findDOMNode(Object(Ve.a)(a)).querySelector(a.state.type),t=e.parentNode.querySelector(".invalid-feedback");if(e.validity.valid)return t.textContent="",!0;var n=e.validationMessage;return t.textContent=n,!1},a.state={showInput:!1,isValidated:!1,initialValue:"",overflowActive:!1,type:e.textarea?"textarea":"input"},!0===e.textarea&&(a.state.expanded=!1),a.showInput=a.showInput.bind(Object(Ve.a)(a)),a.onKeyUp=a.onKeyUp.bind(Object(Ve.a)(a)),a.toggleMore=a.toggleMore.bind(Object(Ve.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"isOverflowActive",value:function(){if(!this.props.textarea)return!1;var e=this.textElement;if(!e)return!1;var t=e.offsetHeight<e.scrollHeight;t!==this.state.overflowActive&&this.setState({overflowActive:t})}},{key:"toggleMore",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"componentDidMount",value:function(){this.isOverflowActive()}},{key:"componentDidUpdate",value:function(){this.isOverflowActive()}},{key:"onKeyUp",value:function(e){13===(e.keyCode||e.which)&&this.showInput(e)}},{key:"showInput",value:function(e){e.target.classList.contains("placeholder")||this.setState({initialValue:e.target.textContent}),this.toggleInput()}},{key:"toggleInput",value:function(){var e=!this.state.showInput;"function"===typeof this.props.isEditing&&this.props.isEditing(e),this.setState({showInput:e})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=e.target.querySelector(this.state.type);this.validate()&&(this.props.handleNewValue(t),this.toggleInput()),this.setState({isValidated:!0})}},{key:"renderValue",value:function(){var e=this,t="";this.state.expanded&&(t="expanded");var a=!1;(this.state.overflowActive||this.state.expanded)&&(a=!0);var n,r,o="More...";this.state.expanded&&(o="Less...");var i="";return this.props.canEdit&&(i="0",n=this.showInput,r=this.onKeyUp),s.a.createElement("span",null,s.a.createElement("span",{className:"text ".concat(t),ref:function(t){return e.textElement=t},onKeyUp:r,onClick:n,tabIndex:i},s.a.createElement(Ot.a,{escapeHtml:!0,source:this.props.value}),a&&s.a.createElement("span",{className:"fader"})),a&&s.a.createElement("button",{type:"button",className:"show-more",onClick:this.toggleMore},o))}},{key:"render",value:function(){var e="text";this.props.textarea&&(e="textarea");var t=[];this.props.className&&(t=Object(v.a)(this.props.className),delete this.props.className),this.state.isValidated&&t.push("was-validated");var a,n=this.state.showInput;return this.props.canEdit?a=n?s.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit,className:t},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:this.props.id},this.props.label),s.a.createElement(Ge.a,{autoFocus:!0,type:e,name:this.props.id,required:this.props.required,"data-state":this.props["data-state"],"data-entityid":this.props["data-entityid"],id:this.props.id,onChange:this.props.handleInputChange,value:this.props.value,placeholder:this.props.placeholder}),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{className:"controls"},s.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.cancel},"Cancel"),s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Done"),s.a.createElement("span",{className:"hint"},"You can use ",s.a.createElement(He.a,{to:"https://help.github.com/articles/basic-writing-and-formatting-syntax/"},"Markdown"))))):""!==this.props.value?this.renderValue():s.a.createElement("span",{className:"placeholder",tabIndex:"0",onClick:this.showInput,onKeyUp:this.onKeyUp},this.props.placeholder):""!==this.props.value&&(a=this.renderValue()),s.a.createElement("div",{className:"editable-text-field ".concat(n&&"editing")},a)}}]),t}(n.Component),wt=(a(354),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this))).onCreateChildTopTenList=function(){a.props.onCreateChildTopTenList(a.props.topTenItem)},a.onMoveUp=function(){a.props.onMoveTopTenItemUp(a.props.topTenItem.id)},a.onMoveDown=function(){a.props.onMoveTopTenItemDown(a.props.topTenItem.id)},a.state={isEditingName:!1},a.onCreateChildTopTenList=a.onCreateChildTopTenList.bind(Object(Ve.a)(a)),a.setIsEditingName=a.setIsEditingName.bind(Object(Ve.a)(a)),a.onMoveUp=a.onMoveUp.bind(Object(Ve.a)(a)),a.onMoveDown=a.onMoveDown.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setIsEditingName",value:function(e){this.setState({isEditingName:e})}},{key:"render",value:function(){var e=!0;""===this.props.topTenItem.name?e=!1:this.state.isEditingName&&ze.getState().topTenItem.things[this.props.topTenItem.id]&&""===ze.getState().topTenItem.things[this.props.topTenItem.id].name&&(e=!1);var t=!0;(this.props.topTenItem.childTopTenList||""===this.props.topTenItem.name||this.state.isEditingName||!this.props.canEdit)&&(t=!1);var a,n=!1;this.props.topTenItem.childTopTenList&&ut(this.props.topTenItem.childTopTenList.id)&&(n=!0),t?a=s.a.createElement("button",{className:"btn btn-primary create-childtopTenList",onClick:this.onCreateChildTopTenList},"Create child Top Ten list"):n&&(a=s.a.createElement("div",{className:"child-topTenList"},s.a.createElement(He.a,{to:"/topTenList/".concat(this.props.topTenItem.childTopTenList.id)},this.props.topTenItem.childTopTenList.name," >")));var r=!0,o=!0;return this.props.canEdit&&""!==this.props.topTenItem.name&&e?1===this.props.topTenItem.order?r=!1:this.props.topTenItem.order===B&&(o=!1):(r=!1,o=!1),s.a.createElement("div",{className:"topTenItem-container"},s.a.createElement("div",{className:"topTenItem-header"},s.a.createElement("span",{className:"order"},this.props.topTenItem.order,":"),s.a.createElement(Ct,{canEdit:this.props.canEdit,name:"".concat(this.props.topTenItem.order,"_name"),label:"Item name",placeholder:"Click here to add an topTenItem","data-state":"".concat(this.props.topTenItem.order,"_name"),"data-entityid":this.props.topTenItem.id,id:"".concat(this.props.topTenItem.order,"_name"),handleInputChange:this.props.handleInputChange,handleNewValue:this.props.handleNewValue,isEditing:this.setIsEditingName,value:this.props.topTenItem.name})),a,e&&s.a.createElement("div",{className:"topTenItem-body"},s.a.createElement(Ct,{textarea:!0,canEdit:this.props.canEdit,name:"".concat(this.props.topTenItem.order,"_description"),placeholder:"Click here to add a description",label:"Item description","data-state":"".concat(this.props.topTenItem.order,"_description"),"data-entityid":this.props.topTenItem.id,id:"".concat(this.props.topTenItem.order,"_description"),handleInputChange:this.props.handleInputChange,handleNewValue:this.props.handleNewValue,value:this.props.topTenItem.description})),r&&s.a.createElement("button",{className:"btn btn-secondary move-up",onClick:this.onMoveUp},"Up"),o&&s.a.createElement("button",{className:"btn btn-secondary move-down",onClick:this.onMoveDown},"Down"))}}]),t}(n.Component)),Nt=function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).onMoveTopTenItemUp=function(e){a.props.dispatch(te({topTenItemId:e}))},a.onMoveTopTenItemDown=function(e){a.props.dispatch(ae({topTenItemId:e}))},a.handleInputChange=function(e){a.setState(Object(Y.a)({},e.target.dataset.state,e.target.value))},a.handleNewValue=function(e){var t=e.dataset.entityid,n=e.dataset.state.split("_")[1],s=e.value;a.props.dispatch(ee(t,n,s))},a.toggleForm=function(){a.setState({showNewTopTenItemForm:!a.state.showNewTopTenItemForm})},a.state={};for(var n=1;n<=B;n++)a.state["".concat(n,"_name")]="",a.state["".concat(n,"_description")]="";var s=a.props.topTenItems;return Object.keys(s).forEach(function(e){if(s[e].order&&s[e].order<=B){var t=s[e].order;a.state["".concat(t,"_id")]=s[e].id,a.state["".concat(t,"_name")]=s[e].name,a.state["".concat(t,"_description")]=s[e].description,s[e].childTopTenList&&(a.state["".concat(t,"_childTopTenList")]=s[e].childTopTenList)}}),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){for(var t={},a=0;a<this.props.topTenItems.length;a++){var n=this.props.topTenItems[a];if(e.topTenItems[a].id!==this.props.topTenItems[a].id||e.topTenItems[a].childTopTenList!==this.props.topTenItems[a].childTopTenList){var s=n.order;t["".concat(s,"_id")]=n.id,t["".concat(s,"_name")]=n.name,t["".concat(s,"_description")]=n.description,t["".concat(s,"_childTopTenList")]=n.childTopTenList}}Object.keys(t).length>0&&this.setState(t)}},{key:"renderTopTenItemsList",value:function(){for(var e=[],t=1;t<=B;t++){var a=this.state["".concat(t,"_name")],n=this.props.canEdit;(a||n)&&e.push(s.a.createElement(Be.a,{key:"topTenItem".concat(t)},s.a.createElement(Ze.a,null,s.a.createElement(wt,{key:"topTenItem".concat(t),topTenItem:{id:this.state["".concat(t,"_id")],order:t,name:a,description:this.state["".concat(t,"_description")],childTopTenList:this.state["".concat(t,"_childTopTenList")]},handleInputChange:this.handleInputChange,handleNewValue:this.handleNewValue,topTenList:this.props.topTenList,canEdit:n,onCreateChildTopTenList:this.props.onCreateChildTopTenList,onMoveTopTenItemUp:this.onMoveTopTenItemUp,onMoveTopTenItemDown:this.onMoveTopTenItemDown}))))}return e}},{key:"render",value:function(){return s.a.createElement("div",{className:"topTenItems-list"},this.renderTopTenItemsList())}}]),t}(n.Component),kt=Object(h.b)()(Nt),_t=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this))).state={showTopTenItems:e.showTopTenItems},a.onSelectTopTenItem=a.onSelectTopTenItem.bind(Object(Ve.a)(a)),a.onShowTopTenItems=a.onShowTopTenItems.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"onShowTopTenItems",value:function(){this.setState({showTopTenItems:!this.state.showTopTenItems})}},{key:"onSelectTopTenItem",value:function(e){this.props.onSelectTopTenItem({topTenList:this.props.topTenList,order:e.target.dataset.order,childTopTenListId:e.target.dataset.childtoptenlistid})}},{key:"renderTopTenItems",value:function(){var e=this,t=parseInt(this.props.selectedTopTenItemOrder),a=this.props.topTenList.id,n=this.props.selectedTopTenListId;return s.a.createElement("div",{className:"topTenItems"},this.props.topTenItemOrganizerData[a].map(function(r){var o,i=a===n&&r.order===t;if(r.childTopTenListId){var c=e.props.topTenListOrganizerData.find(function(e){return e.id===r.childTopTenListId});o=s.a.createElement("span",{className:"child-topTenList"},"> ",c.name)}if(r.name)return s.a.createElement("div",{key:r.id,className:"topTenItem ".concat(i?"selected":"")},s.a.createElement("span",{onClick:e.onSelectTopTenItem,"data-order":r.order,"data-childtoptenlistid":r.childTopTenListId},s.a.createElement("span",{className:"order"},r.order,":"),r.name),o)}))}},{key:"render",value:function(){var e=this.props.topTenList.name,t=this.props.topTenList.id===this.props.selectedTopTenListId,a="+";return this.state.showTopTenItems&&(a="-"),s.a.createElement(Be.a,{className:"organizer-list ".concat(t?"selected":"")},s.a.createElement(Ze.a,null,s.a.createElement("button",{className:"btn btn-light show-topTenItems",onClick:this.onShowTopTenItems},a),s.a.createElement("div",{className:"name"},e),this.state.showTopTenItems&&this.renderTopTenItems()))}}]),t}(n.Component),St=(a(355),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).componentDidUpdate=function(e){(e.topTenList.parent_topTenItem!==a.props.topTenList.parent_topTenItem||0===e.topTenListOrganizerData.length&&0!==a.props.topTenListOrganizerData.length)&&a.resetOrganizer()},a.onClickOrganize=function(){a.setState({showOrganizer:!0}),setTimeout(function(){var e=o.a.findDOMNode(Object(Ve.a)(a)).querySelector(".organizer-topTenList.selected");e&&e.scrollIntoView()},100)},a.onClickCancel=function(){a.resetOrganizer()},a.onClickDone=function(){if(a.state.parentTopTenListId!==a.props.topTenList.id)if(a.state.parentTopTenItemId)if(a.state.selectedTopTenItemChildTopTenListId){var e=a.props.topTenListOrganizerData.find(function(e){return e.id===a.state.selectedTopTenItemChildTopTenListId});if(a.state.parentTopTenItemId===a.props.topTenList.parent_topTenItem)return;confirm("The child Top Ten list '".concat(e.name,"' will become a top level list. Are you sure you want to continue?"))&&a.setParentTopTenItem()}else a.setParentTopTenItem();else confirm("'".concat(a.props.topTenList.name,"' will become a top level topTenList. Are you sure you want to continue?"))&&a.setParentTopTenItem()},a.onSelectParentTopTenItem=function(e){var t=e.topTenList,n=e.order,s=e.childTopTenListId;t.id===a.state.parentTopTenListId&&t.topTenItem[n-1]===a.state.parentTopTenItemId?a.setState({parentTopTenItemId:null,parentTopTenListId:null,selectedTopTenItemChildTopTenListId:null,selectedTopTenItemOrder:null}):a.setState({parentTopTenItemId:t.topTenItem[n-1],parentTopTenListId:t.id,selectedTopTenItemChildTopTenListId:s,selectedTopTenItemOrder:n})},a.state={selectedTopTenItemChildTopTenListId:null},a.onSelectParentTopTenItem=a.onSelectParentTopTenItem.bind(Object(Ve.a)(a)),a.onClickCancel=a.onClickCancel.bind(Object(Ve.a)(a)),a.onClickDone=a.onClickDone.bind(Object(Ve.a)(a)),a.onClickOrganize=a.onClickOrganize.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.resetOrganizer()}},{key:"resetOrganizer",value:function(){this.setState({showOrganizer:!1,selectedTopTenItemOrder:this.selectedTopTenItemOrder(),parentTopTenItemId:this.props.topTenList.parent_topTenItem,parentTopTenListId:this.props.parentTopTenListId})}},{key:"setParentTopTenItem",value:function(){this.props.dispatch(Ce(this.props.topTenList.id,"parent_topTenItem_id",this.state.parentTopTenItemId)),this.resetOrganizer()}},{key:"selectedTopTenItemOrder",value:function(){var e,t=this;if(this.props.parentTopTenListId){var a=this.props.topTenList.parent_topTenItem;-1!==(e=this.props.topTenListOrganizerData.find(function(e){return e.id===t.props.parentTopTenListId}).topTenItem.indexOf(a))&&(e+=1)}return e}},{key:"renderTopTenLists",value:function(){var e=this;return s.a.createElement("div",{className:"topTenLists"},s.a.createElement("div",{className:"inner-tube"},s.a.createElement("span",null,"Select a new parent Top Ten item for this Top Ten list: "),this.props.topTenListOrganizerData.map(function(t){if(e.props.topTenItemOrganizerData[t.id].length>0&&t.id!==e.props.topTenList.id){var a=t.id===e.state.parentTopTenListId;return s.a.createElement(_t,{topTenList:t,topTenListOrganizerData:e.props.topTenListOrganizerData,topTenItemOrganizerData:e.props.topTenItemOrganizerData,key:t.id,selectedTopTenListId:e.state.parentTopTenListId,selectedTopTenItemOrder:e.state.selectedTopTenItemOrder,onSelectTopTenItem:e.onSelectParentTopTenItem,showTopTenItems:a})}})))}},{key:"render",value:function(){var e;return e=this.state.showOrganizer?s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("div",{className:"controls"},s.a.createElement("button",{className:"btn btn-secondary",onClick:this.onClickCancel},"Cancel"),s.a.createElement("button",{className:"btn btn-primary",onClick:this.onClickDone},"Done")))):s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("div",{className:"controls"},s.a.createElement("button",{className:"btn btn-default organize",onClick:this.onClickOrganize},"...")))),s.a.createElement("div",{className:"organizer ".concat(this.state.showOrganizer?"open":"")},e,this.state.showOrganizer&&this.renderTopTenLists())}}]),t}(n.Component)),jt=Object(h.b)()(St),Dt=(a(356),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this))).getTopTenListData=function(e){var t=e.match.params.id;return e.dispatch(Ie(t)),e.dispatch(g()),t},a.getOrganizerData=function(){a.props.topTenList&&(a.props.dispatch(ke(a.props.topTenList.created_by)),a.props.dispatch(g()))},a.onChangeIsPublic=function(e){var t=e.id,n=e.is_public;a.props.dispatch(Ne({id:t,is_public:n}))},a.onDeleteTopTenList=function(){var e=a.props.topTenList.id,t=a.props.topTenList.name;if(confirm("Are you sure you want to delete the topTenList ".concat(t,"?"))){if(a.props.dispatch(we(e)),a.props.parentTopTenList&&ut(a.props.parentTopTenList.id))return void a.props.history.push("/topTenList/".concat(a.props.parentTopTenList.id));a.props.history.push("/")}},a.handleInputChange=function(e){a.setState(Object(Y.a)({},e.target.dataset.state,e.target.value))},a.handleNewValue=function(e){var t=e.dataset.entityid,n=e.dataset.state.split("_")[1],s=e.value;a.props.dispatch(Ce(t,n,s))},a.onCreateChildTopTenList=function(e){a.props.history.push("/newtopTenList?parent-topTenItem-id=".concat(e.id,"&parent-topTenItem-name=").concat(e.name,"&parent-topTenList-name=").concat(a.props.topTenList.name,"&parent-topTenList-id=").concat(a.props.topTenList.id))},a.onChangeIsPublic=function(e){var t=e.id,n=e.is_public;a.props.dispatch(Ne({id:t,is_public:n}))},a.onCloseFlashMessage=function(){a.props.dispatch(g())},a.getTopTenListData=a.getTopTenListData.bind(Object(Ve.a)(a));var n=a.getTopTenListData(e);return a.state={id:n,showOrganizer:!1},a.onDeleteTopTenList=a.onDeleteTopTenList.bind(Object(Ve.a)(a)),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.isLoading&&!this.props.isLoading){var t=mt(this.state.id),a=ut(this.state.id);a||this.props.history.push("/"),this.getOrganizerData(),this.setState({canView:a,canEdit:t}),a&&this.setState({topTenList_name:this.props.topTenList.name,topTenList_description:this.props.topTenList.description})}if(e.match.params.id!==this.props.match.params.id){var n=this.getTopTenListData(this.props);this.setState({id:n})}e.auth.isAuthenticated&&!this.props.auth.isAuthenticated&&(this.props.dispatch(Ie(this.state.id)),this.props.dispatch(g()))}},{key:"renderPage",value:function(){if(this.props.topTenList){var e=!1,t="";this.state.canEdit&&this.props.parentTopTenList&&(this.props.topTenList.is_public&&!this.props.parentTopTenList.is_public?(t="This public topTenList has a private parent topTenList",e=!0):!this.props.topTenList.is_public&&this.props.parentTopTenList.is_public&&(t="This private topTenList has a public parent topTenList",e=!0));var a,n=s.a.createElement("div",{className:"breadcrumbs"},"Top level list");return this.props.parentTopTenList&&(a=this.props.parentTopTenList.id,n=s.a.createElement("div",{className:"breadcrumbs"},s.a.createElement(He.a,{to:"/topTenList/".concat(this.props.parentTopTenList.id)},this.props.parentTopTenList.name)," > ",this.props.parentTopTenItem.name)),s.a.createElement("div",null,!C(this.props.errors)&&s.a.createElement(Ke.a,null,s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement(rt,{message:I(this.props.errors),type:"error",onClick:this.onCloseFlashMessage})))),this.props.isLoading&&s.a.createElement(it,null),this.props.topTenList&&!this.props.isLoading&&s.a.createElement("div",null,s.a.createElement(Ke.a,null,s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{className:"topTenList-name"},s.a.createElement(Ct,{canEdit:this.state.canEdit,required:!0,name:"topTenList_name",placeholder:"Click here to add a name for the list",label:"Top Ten item name","data-state":"topTenList_name","data-entityid":this.props.topTenList.id,id:"topTenList_name",handleInputChange:this.handleInputChange,handleNewValue:this.handleNewValue,value:this.state.topTenList_name}),this.state.canEdit&&s.a.createElement("div",{className:"topTenList-detail-controls"},s.a.createElement(lt,{topTenListId:this.props.topTenList.id,isPublic:this.props.topTenList.is_public,onChangeIsPublic:this.onChangeIsPublic}),s.a.createElement("button",{className:"btn btn-danger",onClick:this.onDeleteTopTenList},"X")))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,this.state.canEdit&&this.props.topTenListOrganizerData.length>1&&s.a.createElement(jt,{topTenList:this.props.topTenList,parentTopTenListId:a,topTenListOrganizerData:this.props.topTenListOrganizerData,topTenItemOrganizerData:this.props.topTenItemOrganizerData}),n)),e&&s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("div",{className:"privacy-warning"},t))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{className:"topTenList-description"},s.a.createElement(Ct,{textarea:!0,canEdit:this.state.canEdit,name:"topTenList_description",placeholder:"Click here to add a description for the topTenList",label:"Description","data-state":"topTenList_description","data-entityid":this.props.topTenList.id,id:"topTenList_description",handleInputChange:this.handleInputChange,handleNewValue:this.handleNewValue,value:this.state.topTenList_description})))),s.a.createElement(Ke.a,null,this.props.thisTopTenListTopTenItems&&s.a.createElement(kt,{topTenItems:this.props.thisTopTenListTopTenItems,topTenList:this.props.topTenList.id,canEdit:this.state.canEdit,onCreateChildTopTenList:this.onCreateChildTopTenList,onMoveTopTenItemUp:this.onMoveTopTenItemUp,onMoveTopTenItemDown:this.onMoveTopTenItemDown}))))}}},{key:"render",value:function(){var e;return e=this.state.canView?this.renderPage():s.a.createElement("p",null,"Either this topTenList does not exist or you do not have permission to view it"),s.a.createElement("div",{className:"topTenList-detail"},e)}}]),t}(n.Component)),Pt=Object(h.b)(function(e,t){var a=pt({parentObject:e.topTenList.things,property:"id",value:t.match.params.id}),n=xe(e)(a);return{auth:e.auth,errors:e.errors,isLoading:e.topTenList.isLoading,topTenList:a,thisTopTenListTopTenItems:Re(e)(a),parentTopTenList:n.parentTopTenList,parentTopTenItem:n.parentTopTenItem,topTenListOrganizerData:Me(e),topTenItemOrganizerData:re(e)}})(Dt),At=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).state={errors:{}},e.sendConfirmationEmail=e.sendConfirmationEmail.bind(Object(Ve.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated||this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated||this.props.history.push("/"),this.props.dispatch({type:"CONFIRM_EMAIL_NOT_SENT"})}},{key:"sendConfirmationEmail",value:function(){this.props.dispatch(M())}},{key:"render",value:function(){var e=this.props.auth.user.emailVerified,t=e?"verified":"unverified";return s.a.createElement("div",null,!C(this.props.errors)&&s.a.createElement(Ke.a,null,s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement(rt,{message:I(this.props.errors),type:"error",onClick:this.onCloseFlashMessage})))),s.a.createElement(Ke.a,null,this.props.isLoading&&s.a.createElement(it,null),s.a.createElement("h2",null,"My account"),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("div",null,"Username: ",this.props.auth.user.username))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement(He.a,{to:"/changepassword"},"Change password"))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("div",null,"Email address: ",this.props.auth.user.email),s.a.createElement("div",null,"Status: ",t),!e&&s.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.sendConfirmationEmail},"Resend confirmation email"))),this.props.auth.confirmEmailSent&&s.a.createElement("div",{className:"valid-feedback"},"A verification email has been sent to ",this.props.auth.user.email,". If you do not receive the email within a few minutes, please check your Junk or Spam folder."),this.props.auth.confirmEmailAlreadyVerified&&s.a.createElement("div",{className:"valid-feedback"},"The email address ",this.props.auth.user.email," has already been verified.")))}}]),t}(n.Component),Mt=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors,isLoading:e.topTenList.isLoading,sendConfirmationEmail:M,confirmEmailNotSent:A}})(At),Rt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this))).onCloseFlashMessage=function(){a.props.dispatch(g())},a.state={email:"",errors:{}},a.handleInputChange=a.handleInputChange.bind(Object(Ve.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(Ve.a)(a)),e.dispatch(g()),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/"),this.props.dispatch({type:"FORGOT_PASSWORD_EMAIL_NOT_SENT"})}},{key:"handleInputChange",value:function(e){this.setState(Object(Y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={email:this.state.email};this.props.dispatch(j(t))}},{key:"render",value:function(){return s.a.createElement(Ke.a,null,!C(this.props.errors)&&s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement(rt,{message:I(this.props.errors),type:"error",onClick:this.onCloseFlashMessage}))),s.a.createElement("h2",null,"Forgot your password?"),s.a.createElement("p",null,"Enter your email address. A reset password link will be emailed to you."),s.a.createElement($e,{onSubmit:this.handleSubmit},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"email"},"Email address"),s.a.createElement(Ge.a,{type:"email",name:"email",required:!0,id:"email",onChange:this.handleInputChange,value:this.state.email,placeholder:"Enter your email address"}),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Send me a password reset email"))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,this.props.errors.email&&s.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}},this.props.errors.email)))),this.props.auth.forgotPasswordEmailSent&&s.a.createElement("div",{className:"valid-feedback"},"A password reset email has been sent to ",this.state.email,". If you don't see it within a few minutes, please check your junk mail folder."))}}]),t}(n.Component),xt=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors,forgotPassword:j,forgotPasswordEmailNotSent:S}})(Rt),Ut=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).state={old_password:"",new_password:"",new_password_confirm:""},e.handleInputChange=e.handleInputChange.bind(Object(Ve.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(Ve.a)(e)),e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(Y.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={old_password:this.state.old_password,new_password1:this.state.new_password,new_password2:this.state.new_password_confirm};this.props.changePassword(t,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated||this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated||this.props.history.push("/")}},{key:"render",value:function(){return s.a.createElement(Ke.a,null,s.a.createElement("h2",null,"Change your password"),s.a.createElement($e,{onSubmit:this.handleSubmit,inputsmustmatch:{input1:"new_password",input2:"new_password_confirm",message:"New passwords must match"}},s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"old_password"},"Old password"),s.a.createElement(Ge.a,{type:"password",name:"old_password",id:"old_password",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.old_password,placeholder:"Enter your old password",onChange:this.handleInputChange}),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"new_password"},"New password"),s.a.createElement(Ge.a,{type:"password",name:"new_password",id:"new_password",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.new_password,placeholder:"Enter your password",onChange:this.handleInputChange}),s.a.createElement("div",{className:"invalid-feedback"})))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("div",{className:"form-group"},s.a.createElement(Xe.a,{for:"new_password_confirm"},"Confirm your new password"),s.a.createElement(Ge.a,{type:"password",name:"new_password_confirm",id:"new_password_confirm",required:!0,minLength:8,pattern:".*[^0-9].*",value:this.state.new_password_confirm,placeholder:"Confirm your password",onChange:this.handleInputChange}),s.a.createElement("div",{className:"invalid-feedback"}),s.a.createElement("small",{className:"form-text text-muted"},s.a.createElement("ul",null,s.a.createElement("li",null,"Your password can't be too similar to your other personal information."),s.a.createElement("li",null,"Your password must contain at least 8 characters."),s.a.createElement("li",null,"Your password can't be a commonly used password."),s.a.createElement("li",null,"Your password can't be entirely numbers.")))))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},s.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Change password now"))),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,{md:"9",lg:"6"},this.props.errors.changePassword&&s.a.createElement("div",{className:"invalid-feedback",style:{display:"block"}},this.props.errors.changePassword)))),this.props.auth.changePasswordComplete&&s.a.createElement("div",{className:"valid-feedback"},"Your new password has been saved"))}}]),t}(n.Component),Ft=Object(h.b)(function(e){return{auth:e.auth,errors:e.errors}},{changePassword:function(e){return function(t){t(g()),t(D());var a=new FormData;for(var n in e)a.append(n,e[n]);return O({url:"/api/v1/rest-auth/password/change/",data:a,method:"POST",useAuth:!0}).then(function(e){return t(P()),e}).catch(function(e){return t(b({changePassword:e.message}))})}},passwordNotChanged:D})(Object(qe.a)(Ut)),zt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this))).state={errors:{}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.onLogout()}},{key:"onLogout",value:function(e){this.props.auth.isAuthenticated&&this.props.logoutUser(this.props.history)}},{key:"render",value:function(){return s.a.createElement(Ke.a,null,s.a.createElement("h2",null,"Your email address has been verified"),s.a.createElement(Be.a,null,s.a.createElement(Ze.a,null,s.a.createElement(He.a,{to:"/login",className:"nav-link"},"Login"))))}}]),t}(n.Component),Vt=Object(h.b)(function(e){return{auth:e.auth}},{logoutUser:k})(Object(qe.a)(zt));a(357),a(358);if(localStorage.getItem("mytoptensJwtToken")){ze.dispatch(N(localStorage.mytoptensJwtToken)),ze.dispatch(_());var Ht=Date.now()/1e3;localStorage.mytoptensJwtToken.exp<Ht&&ze.dispatch(k())}var qt=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(h.a,{store:ze},s.a.createElement(m.a,null,s.a.createElement("div",null,s.a.createElement(Je,null),s.a.createElement("div",{className:"container"},s.a.createElement(d.a,{exact:!0,path:"/",component:gt}),s.a.createElement(d.a,{exact:!0,path:"/newtopTenList",component:Lt}),s.a.createElement(d.a,{exact:!0,path:"/topTenList/:id",component:Pt}),s.a.createElement(d.a,{exact:!0,path:"/register",component:et}),s.a.createElement(d.a,{exact:!0,path:"/welcome",component:at}),s.a.createElement(d.a,{exact:!0,path:"/login",component:st}),s.a.createElement(d.a,{exact:!0,path:"/forgotpassword",component:xt}),s.a.createElement(d.a,{exact:!0,path:"/account",component:Mt}),s.a.createElement(d.a,{exact:!0,path:"/changepassword",component:Ft}),s.a.createElement(d.a,{exact:!0,path:"/verified",component:Vt})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()});o.a.render(s.a.createElement(qt,null),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.3dc43196.chunk.js.map